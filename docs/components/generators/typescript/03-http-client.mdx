---
slug: /components/@basketry/typescript-http-client
title: HTTP Client
description: Generates an HTTP client for Node or Browser environments
sidebar_position: 3
---

import Tabs from "@theme/Tabs";
import TabItem from "@theme/TabItem";

## Install

<Tabs groupId="package-manager">
  <TabItem value="npm" label="npm" default>

```sh
npm install @basketry/typescript-http-client
```

  </TabItem>
  <TabItem value="yarn" label="yarn">

```sh
yarn add @basketry/typescript-http-client
```

  </TabItem>
  <TabItem value="pnpm" label="pnpm">

```sh
pnpm add @basketry/typescript-http-client
```

  </TabItem>
</Tabs>

## Basic Usage

```json title="basketry.config.json"
{
  "source": "petstore.json",
  "parser": "@basketry/openapi-3",
  "generators": [
    "@basketry/typescript",
    "@basketry/typescript-validators",
    "@basketry/typescript-http-client"
  ],
  "output": "src"
}
```

## File Structure

This generator will create an `http-client.ts` file that contains an HTTP client for the API. This client will have methods for each operation defined in the source schema.

```
my-project/
├── node_modules/
├── src/
│   ├── v1/                  <-- generated
│   │   └── date-utils.ts
│   │   └── http-client.ts   <-- generated
│   │   └── sanitizers.ts
│   │   └── validators.ts
│   │   └── types.ts
│   ├── index.ts
├── .gitignore
├── basketry.config.json
├── package.json
├── petstore.json
└── README.md
```

## Options

This generator depends on the `@basketry/typescript` and `@basketry/typescript-validators` generator and all of their applied options will also apply to files emitted by this generator.

See:

- [`@basketry/typescript` options](/docs/components/@basketry/typescript#options)
- [`@basketry/typescript-validators` options](/docs/components/@basketry/typescript-validators#options)

A string value that specifies the path to the types file. This generator depends on files generated by the `@basketry/typescript` and `@basketry/typescript-validators` generators. In most cases, those files will exist within the same directory as the generated `http-client.ts` file.

By default, the generated code will import its dependencies as follows:

```typescript title="src/v1/http-client.ts"
import * as dateUtils from "./date-utils.ts";
import * as sanitizers from "./sanitizers.ts";
import * as validators from "./validators.ts";
import * as types from "./types.ts";
```

If those modules are located in a different directory, you can use the following options to specify custom import paths. These paths can be any string that you would normally `require` or `import`. This can be useful when generated dependencies are distributed as part of a library or package.

### `dateUtilsImportPath`

- Type: `string` - specifies the path for the date-utils import.

```json title="basketry.config.json"
{
  "source": "petstore.json",
  "parser": "@basketry/openapi-3",
  "generators": [
    "@basketry/typescript",
    "@basketry/typescript-validators",
    "@basketry/typescript-http-client"
  ],
  "output": "src",
  "options": {
    "typescriptHttpClient": {
      "dateUtilsImportPath": "@petstore/sdk/lib/date-utils"
    }
  }
}
```

This option as configured will now emit the following code at the top of the generated file:

```typescript title="src/v1/http-client.ts"
import * as dateUtils from "@petstore/sdk/lib/date-utils";
```

### `sanitizersImportPath`

- Type: `string` - specifies the path for the sanitizers import.

```json title="basketry.config.json"
{
  "source": "petstore.json",
  "parser": "@basketry/openapi-3",
  "generators": [
    "@basketry/typescript",
    "@basketry/typescript-validators",
    "@basketry/typescript-http-client"
  ],
  "output": "src",
  "options": {
    "typescriptHttpClient": {
      "sanitizersImportPath": "@petstore/sdk/lib/sanitizers"
    }
  }
}
```

This option as configured will now emit the following code at the top of the generated file:

```typescript title="src/v1/http-client.ts"
import * as sanitizers from "@petstore/sdk/lib/sanitizers";
```

### `validatorsImportPath`

- Type: `string` - specifies the path for the validators import.

```json title="basketry.config.json"
{
  "source": "petstore.json",
  "parser": "@basketry/openapi-3",
  "generators": [
    "@basketry/typescript",
    "@basketry/typescript-validators",
    "@basketry/typescript-http-client"
  ],
  "output": "src",
  "options": {
    "typescriptHttpClient": {
      "validatorsImportPath": "@petstore/sdk/lib/validators"
    }
  }
}
```

This option as configured will now emit the following code at the top of the generated file:

```typescript title="src/v1/http-client.ts"
import * as validators from "@petstore/sdk/lib/validators";
```

### `typesImportPath`

- Type: `string` - specifies the path for the types import.

```json title="basketry.config.json"
{
  "source": "petstore.json",
  "parser": "@basketry/openapi-3",
  "generators": [
    "@basketry/typescript",
    "@basketry/typescript-validators",
    "@basketry/typescript-http-client"
  ],
  "output": "src",
  "options": {
    "typescriptHttpClient": {
      "typesImportPath": "@petstore/sdk/lib/types"
    }
  }
}
```

This option as configured will now emit the following code at the top of the generated file:

```typescript title="src/v1/http-client.ts"
import * as types from "@petstore/sdk/lib/types";
```

## Examples

You can use the following examples to see how to use the generated HTTP Client. In both the browser and Node environments, you can pass any method that implements the `fetch` interface to the service class. You can use the native `fetch` method, a wrapped version of `fetch`, or a custom library of your choosing.

### Browser

```typescript title="src/index.ts"
import { HttpPetService, PetService } from "./v1/http-client";

const petService: PetService = new HttpPetService(window.fetch.bind(window), {
  root: "https://api.example.com/v1",
});

export default petService;
```

:::warning

Note that if you pass `window.fetch` to a service class, you need to rebind the `fetch` method to the `window` object.

If you don't, the `fetch` method will fail to execute in the browser environment. No request will be sent, and the console will display the error "TypeError: Failed to execute 'fetch' on 'Window': Illegal invocation".

:::

### Node

```typescript title="src/index.ts"
import { HttpPetService, PetService } from "./v1/http-client";

const petService: PetService = new PetService(fetch, {
  root: "https://api.example.com/v1",
});

export default petService;
```
